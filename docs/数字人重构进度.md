# æ•°å­—äººé‡æ„è¿›åº¦

## å·²å®Œæˆå·¥ä½œ

### âœ… é˜¶æ®µ1ï¼šåŸºç¡€æ¶æ„ï¼ˆå·²å®Œæˆï¼‰

1. **åˆ›å»ºç›®å½•ç»“æ„**
   - âœ… `src/renderers/base/` - åŸºç¡€æŠ½è±¡ç›®å½•
   - âœ… `src/renderers/digital-human/` - æ•°å­—äººæ¸²æŸ“å™¨ç›®å½•

2. **å®šä¹‰æ¥å£å’ŒæŠ½è±¡ç±»**
   - âœ… `IRenderer.ts` - æ¸²æŸ“å™¨æ¥å£å®šä¹‰
   - âœ… `BaseRenderer.ts` - åŸºç¡€æ¸²æŸ“å™¨æŠ½è±¡ç±»
   - âœ… `RendererManager.ts` - æ¸²æŸ“å™¨ç®¡ç†å™¨

3. **å®ç°æ•°å­—äººæ¸²æŸ“å™¨ï¼ˆç‹¬ç«‹æ¨¡å—ï¼‰**
   - âœ… `DigitalHumanService.ts` - æ•°å­—äººæœåŠ¡ç±»ï¼ˆä» avatar.ts æå–ï¼‰
   - âœ… `DigitalHumanRenderer.ts` - æ•°å­—äººæ¸²æŸ“å™¨å®ç°
   - âœ… `types.ts` - æ•°å­—äººç±»å‹å®šä¹‰
   - âœ… `index.ts` - æ¨¡å—å¯¼å‡º

4. **æ³¨å†Œæ¸²æŸ“å™¨å·¥å‚**
   - âœ… åœ¨ `main.ts` ä¸­æ³¨å†Œæ•°å­—äººæ¸²æŸ“å™¨å·¥å‚

## å¾…å®Œæˆå·¥ä½œ

### âœ… é˜¶æ®µ2ï¼šé›†æˆæ•°å­—äººæ¸²æŸ“å™¨ï¼ˆå·²å®Œæˆï¼‰

1. **ä¿®æ”¹ AvatarRender.vueï¼ˆæœ€å°åŒ–ä¿®æ”¹ï¼‰**
   - âœ… å¼•å…¥ `RendererManager` å’Œ `DigitalHumanRenderer`
   - âœ… ä½¿ç”¨ç®¡ç†å™¨åˆ›å»ºå’Œç®¡ç†æ•°å­—äººæ¸²æŸ“å™¨
   - âœ… æ·»åŠ  `setupPartnerDigitalHumanRenderer` å’Œ `setupUserDigitalHumanRenderer` å‡½æ•°
   - âœ… ç›‘å¬è§’è‰²å˜åŒ–ï¼Œè‡ªåŠ¨åˆ›å»º/é”€æ¯æ¸²æŸ“å™¨
   - âœ… ç›‘å¬æ˜¾ç¤ºçŠ¶æ€å˜åŒ–ï¼Œé€šè¿‡æ¸²æŸ“å™¨æ§åˆ¶æ˜¾ç¤º/éšè—
   - âœ… ä¿®æ”¹æ‹–æ‹½ç»“æŸå‡½æ•°ï¼Œé€šè¿‡æ¸²æŸ“å™¨æ›´æ–°ä½ç½®
   - âœ… åœ¨ `onUnmounted` ä¸­æ¸…ç†æ¸²æŸ“å™¨
   - âœ… **ä¸ä¿®æ”¹ç«‹ç»˜ç›¸å…³ä»£ç **

2. **ä¿®æ”¹ ConfigPanel.vueï¼ˆæœ€å°åŒ–ä¿®æ”¹ï¼‰**
   - âœ… å¼•å…¥ `rendererManager` å’Œ `DigitalHumanRenderer`
   - âœ… ä¿®æ”¹ `handleConnectRoleFromList` å’Œ `handleConnectUserRoleFromList`ï¼Œä½¿ç”¨æ¸²æŸ“å™¨ç®¡ç†å™¨
   - âœ… ä¿®æ”¹ `handleDisconnectRoleFromList` å’Œ `handleDisconnectUserRoleFromList`ï¼Œä½¿ç”¨æ¸²æŸ“å™¨ç®¡ç†å™¨
   - âœ… ä¿®æ”¹ `toggleIllustration` å‡½æ•°ï¼Œä½¿ç”¨æ¸²æŸ“å™¨ç®¡ç†å™¨æ§åˆ¶æ˜¾ç¤º/éšè—
   - âœ… **ç¼–è¾‘ç•Œé¢çš„è¿æ¥é€»è¾‘ä¿æŒä¸å˜**ï¼ˆä½¿ç”¨ `avatarService`ï¼Œå› ä¸ºåªæ˜¯ä¸´æ—¶é¢„è§ˆï¼‰
   - âœ… **ä¸ä¿®æ”¹ç«‹ç»˜ç›¸å…³ä»£ç **

### ğŸ“‹ é˜¶æ®µ3ï¼šæµ‹è¯•éªŒè¯ï¼ˆå¾…è¿›è¡Œï¼‰

1. **åŠŸèƒ½æµ‹è¯•**
   - â³ æµ‹è¯•æ•°å­—äººè¿æ¥/æ–­å¼€ï¼ˆä»è§’è‰²åˆ—è¡¨ï¼‰
   - â³ æµ‹è¯•æ•°å­—äººæ˜¾ç¤º/éšè—ï¼ˆç‚¹å‡»å¤´åƒï¼‰
   - â³ æµ‹è¯•æ•°å­—äººæ‹–æ‹½
   - â³ æµ‹è¯•æ•°å­—äººä½ç½®å’Œç¼©æ”¾
   - â³ æµ‹è¯•ç¼–è¾‘ç•Œé¢ä¸­çš„è¿æ¥/æ–­å¼€ï¼ˆä¸´æ—¶é¢„è§ˆï¼‰
   - â³ æµ‹è¯•æ•°å­—äººæˆªå›¾åŠŸèƒ½
   - â³ ç¡®ä¿ç«‹ç»˜åŠŸèƒ½ä¸å—å½±å“
   - â³ æµ‹è¯•å¤šä¸ªæ•°å­—äººåŒæ—¶æ˜¾ç¤º
   - â³ æµ‹è¯•è§’è‰²åˆ‡æ¢æ—¶æ¸²æŸ“å™¨çš„åˆ›å»º/é”€æ¯

## æ¶æ„è¯´æ˜

### ç›®å½•ç»“æ„

```
src/
  â”œâ”€â”€ renderers/                    # æ¸²æŸ“å™¨ç›®å½•ï¼ˆæ–°å¢ï¼‰
  â”‚   â”œâ”€â”€ base/                     # åŸºç¡€æŠ½è±¡
  â”‚   â”‚   â”œâ”€â”€ IRenderer.ts          # æ¸²æŸ“å™¨æ¥å£
  â”‚   â”‚   â”œâ”€â”€ BaseRenderer.ts       # åŸºç¡€æ¸²æŸ“å™¨æŠ½è±¡ç±»
  â”‚   â”‚   â””â”€â”€ RendererManager.ts    # æ¸²æŸ“å™¨ç®¡ç†å™¨
  â”‚   â”œâ”€â”€ digital-human/             # æ•°å­—äººæ¸²æŸ“å™¨
  â”‚   â”‚   â”œâ”€â”€ DigitalHumanRenderer.ts
  â”‚   â”‚   â”œâ”€â”€ DigitalHumanService.ts
  â”‚   â”‚   â”œâ”€â”€ types.ts
  â”‚   â”‚   â””â”€â”€ index.ts
  â”‚   â””â”€â”€ index.ts                  # ç»Ÿä¸€å¯¼å‡º
```

### ä½¿ç”¨æ–¹å¼

```typescript
// åˆ›å»ºæ•°å­—äººæ¸²æŸ“å™¨
const renderer = await rendererManager.createRenderer(roleId, {
  roleId: 'partner:user123',
  roleType: 'digital_human',
  positionX: 50,
  positionY: 50,
  scale: 1.0,
  avatarAppId: 'xxx',
  avatarAppSecret: 'xxx'
})

// æ¸²æŸ“åˆ°å®¹å™¨
await renderer.render(containerElement)

// è¿æ¥
await renderer.connect()

// æ˜¾ç¤º/éšè—
renderer.show()
renderer.hide()

// æ›´æ–°é…ç½®
await renderer.updateConfig({ positionX: 60 })

// é”€æ¯
renderer.destroy()
```

## æ³¨æ„äº‹é¡¹

1. **ä¸¥ç¦ä¿®æ”¹ç«‹ç»˜ä»£ç **ï¼šæ‰€æœ‰ç«‹ç»˜ç›¸å…³ä»£ç ä¿æŒä¸å˜
2. **å‘åå…¼å®¹**ï¼šé‡æ„åçš„åŠŸèƒ½åº”ä¸ç°æœ‰åŠŸèƒ½å®Œå…¨ä¸€è‡´
3. **æ¸è¿›å¼é‡æ„**ï¼šåˆ†é˜¶æ®µè¿›è¡Œï¼Œæ¯ä¸ªé˜¶æ®µéƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•

## ä¸‹ä¸€æ­¥

1. å®Œæˆ `AvatarRender.vue` çš„é›†æˆï¼ˆä½¿ç”¨æ¸²æŸ“å™¨ç®¡ç†å™¨ï¼‰
2. å®Œæˆ `ConfigPanel.vue` çš„é›†æˆï¼ˆä½¿ç”¨æ¸²æŸ“å™¨ç®¡ç†å™¨ï¼‰
3. è¿›è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•
4. ä¿®å¤å‘ç°çš„é—®é¢˜

